Tritask で扱うファイル形式やフォーマットについて。

<!-- toc -->
- [ファイル形式](#ファイル形式)
- [ファイル内容](#ファイル内容)
  - [BNF](#bnf)
- [タスクフォーマット](#タスクフォーマット)
  - [マーク](#マーク)
  - [日付と曜日](#日付と曜日)
  - [開始時刻と終了時刻](#開始時刻と終了時刻)
  - [タスク内容](#タスク内容)
  - [属性](#属性)

# ファイル形式

| 項目 | 内容 |
| ---- | ---- |
| 拡張子 | `.trita` |
| 文字コード | 任意 |
| 改行コード | 任意 |

専用のファイル別設定を適用できるよう、独自の拡張子を採用する。

# ファイル内容
- 1行に1タスクを書く
- タスク以外の行は認めない

## BNF

```bnf
<trita-file>  ::= "" | <tasks>
<tasks>       ::= <task> | <task> "\n" <tasks>
<task>        ::= <mark> " " <date> " " <dow> " " <start-time> " " <end-time> " " <description>
```

# タスクフォーマット

```
1 2--------- 3-- 4---- 5---- 6----------
M YYYY/MM/DD DOW HH:MM HH:MM DESCRIPTION
```

- 1 **マーク(Mark)** ソート用マーク。
- 2 **日付(Date)** このタスクの実行日。
- 3 **曜日(DOW)** 日付に対応する曜日。
- 4 **開始時刻(StartTime)** このタスクの開始時刻。
- 5 **終了時刻(Endtime)** このタスクの終了時刻。
- 6 **タスク内容(Description)** タスク内容。後述する **属性(Attribute)** も記述可。

## マーク
- マークは空欄あるいは半角英数字1文字

マークはソート時の並び順を制御するための文字である。どのタスクにどの文字を与えるかは任意。

## 日付と曜日
- 日付は `YYYY/MM/DD` あるいは空欄
- 曜日は `Sun`, `Mon`, `Tue`, `Wed`, `Thu`, `Fri`, `Sat` あるいは空欄

日付はタスクの実行日を表す。

曜日は日付の視認性を高めるために採用する。日付と連動させるのが望ましい。

## 開始時刻と終了時刻
- `HH:MM` あるいは空欄
  - 例1: `00:00`
  - 例2: `08:01`
  - 例3: `08:11`
  - 例4: `12:01`
  - 例5: `12:11`
  - 例6: `23:59`

開始時刻と終了時刻の組み合わせとその意味については任意だが、以下を推奨する。

| 開始時刻 | 終了時刻 | 存在可否 | 解説 |
| -------- | -------- | -------- | ---- |
| `HH:MM`  |          | :o:      | 開始中のタスク（まだ終了していない） |
| `HH:MM`  | `HH:MM`  | :o:      | 終了したタスク |
|          | `HH:MM`  | :x:      | **不正なフォーマット（存在を許さない）** |
|          |          | :o:      | 開始されていないタスク |

## タスク内容
- タスク内容は任意文字列あるいは空欄

タスク内容はテキストエディタで折り返されない程度の文字列長であることが望ましい。

タスク内容として後述する **属性** を書くことができる。

## 属性
- タスク内容に `Name:Value` 形式で記載
  - Name は `[a-zA-Z0-9]+`
  - Value は `[^: ]+`
- 属性の両端にはスペースを一つ以上挿入すること。ただしタスク内容の先頭と末尾を除く

属性とはタスクに何らかの状態や機能を付与する拡張仕様である。Tritask 仕様自体は具体的な属性について何も規定しない。
